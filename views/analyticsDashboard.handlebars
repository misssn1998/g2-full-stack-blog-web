<span style="color: brown;">{{errorMessage}}</span>

<div id="container1">
    <div id="keyMetricsTitleDiv">
        {{#if user}}
        <h2 id="keyMetricsTitle"> <img src="{{user.user_icon}}"> 
        Your Analytics Dashboard</h2>
        {{else}}
        <h2 id="keyMetricsTitle">Analytics Dashboard</h2>
        {{/if}}
    </div>

    <div class="analyticsContainer">
        {{!-- <div class="analyticsDashboard"> --}}
            <div class="keyMetricsDiv">
                <div class="indvKeyMetrics" id="followersDiv">
                    {{#if followers}}
                    <div id="followersIcon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="white" class="bi bi-people"
                            viewBox="0 0 16 16">
                            <path
                                d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8Zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022ZM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816ZM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" />
                        </svg>
                    </div>
                    <div id="followerNumberDiv">
                        <p id="followerNumber">{{followers}}</p>
                    </div>
                    {{else}}
                    {{!-- <div class="followerUpperDiv"> --}}
                        <div id="followersIcon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="white"
                                class="bi bi-people" viewBox="0 0 16 16">
                                <path
                                    d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8Zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022ZM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816ZM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" />
                            </svg>
                        </div>
                        <p id="followerNumber">0</p>
                        {{!--
                    </div> --}}
                    {{/if}}
                    <h3 id="followerTitle">Total Followers</h3>
                </div>

                <div class="indvKeyMetrics" id="commentsDiv">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="black" class="bi bi-chat-text"
                        viewBox="0 0 16 16">
                        <path
                            d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z" />
                        <path
                            d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z" />
                    </svg>
                    <h3>Total Comments per Article</h3>
                    {{#if comments}}
                    {{#each comments}}
                    {{#if this.comments_count}}
                    <div class="data">
                        <span class="articleWithComments">"{{this.title}}"</span><br>
                        <span><strong>{{this.comments_count}}
                                comments</strong></span>
                    </div>

                    {{else}}
                    <div class="data">
                        <span class="articleWithComments">"{{this.title}}"</span><br> <span><strong>0 comments</strong>
                        </span>
                    </div>
                    {{/if}}
                    {{/each}}
                    {{else}}
                    <p>N/A</p>
                    {{/if}}
                </div>

                <div class="indvKeyMetrics" id="likesDiv">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="#black" class="bi bi-valentine"
                        viewBox="0 0 16 16">
                        <path
                            d="M8 5.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132ZM2.25 4a.25.25 0 0 0-.25.25v1.5a.25.25 0 0 0 .5 0V4.5h1.25a.25.25 0 0 0 0-.5h-1.5Zm10 0a.25.25 0 1 0 0 .5h1.25v1.25a.25.25 0 1 0 .5 0v-1.5a.25.25 0 0 0-.25-.25h-1.5ZM2.5 10.25a.25.25 0 1 0-.5 0v1.5c0 .138.112.25.25.25h1.5a.25.25 0 1 0 0-.5H2.5v-1.25Zm11.5 0a.25.25 0 1 0-.5 0v1.25h-1.25a.25.25 0 1 0 0 .5h1.5a.25.25 0 0 0 .25-.25v-1.5Z" />
                        <path fill-rule="evenodd"
                            d="M0 2.994v-.06a1 1 0 0 1 .859-.99l13-1.857a1 1 0 0 1 1.141.99V2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V2.994ZM1 3v10h14V3H1Z" />
                    </svg>
                    <h3>Total Likes per Article</h3>
                    {{#if likes}}
                    {{#each likes}}
                    {{#if this.like_count}}
                    <div class="data">
                    <span class="articleWithComments">"{{this.title}}"</span><br> <span><strong>{{this.like_count}}
                            likes</strong> </span>
                    </div>
                    {{else}}
                    <div class="data">
                    <span class="articleWithComments">"{{this.title}}"</span> <br><span> <strong>0 likes</strong></span>
                    </div>
                    {{/if}}
                    {{/each}}
                    {{else}}
                    <p>N/A</p>
                    {{/if}}
                </div>

            </div>


            <div class="topThreeDiv">
                {{!-- {{#if user}}
                <h2 id="topThreeTitle"> {{this.fname}}'s TOP 3 ARTICLES</h2>
                {{else}} --}}
                <div id="top3Container">
                    <i class="fa-solid fa-trophy"></i>
                    <h2 id="topThreeTitle">TOP 3 ARTICLES</h2>
                    {{!-- {{/if}} --}}
                </div>

                {{#if topArticles}}
                <div class="indvTopArticles">
                    {{#each topArticles}}
                    {{!-- <img src="{{this.article_thumbnail}}" alt="{{this.article_name}}"
                        style="width:500px;height:600px;"> --}}

                    <div class="topArticleSummaries">
                        <h1>{{this.index}}</h1>
                        <h3 id="topTitles">"{{this.title}}"</h3>
                        {{#if this.comments_count}}
                        <li>Number of Comments: {{this.comments_count}}</li>
                        {{else}}
                        <li>Number of Comments: 0</li>
                        {{/if}}
                        {{#if this.like_count}}
                        <li>Number of Likes: {{this.like_count}}</li>
                        {{else}}
                        <li>Number of Likes: 0</li>
                        {{/if}}
                        {{#if this.popularity}}
                        <li>Popularity Metric: {{this.popularity}}</li>
                        {{else}}
                        <li>Popularity Metric: 0</li>
                        {{/if}}
                        {{!-- <li>Creation Time: {{this.creation_period}}</li> --}}
                    </div>
                    {{/each}}
                    {{else}}
                    <p>You have no top articles!</p>
                    {{/if}}
                </div>
            </div>



            {{!-- PLOT --}}
            <div id="plot" style="width:600px;height:250px;">
                <script src="https://cdn.plot.ly/plotly-2.26.0.min.js" charset="utf-8"></script>
                <script src="/script/analytics-script.js"></script>
            </div>
        </div>
    </div>